import{s as L,u as T,v as m,c as J,A as W,j as q,r as p,o,a as b,w as _,d as n,z as H,b as r,g as z,k as O,l as U,e,q as Y,h as v,F as P,y as R,m as $,x as K,n as Q,t as l}from"./index-ffa3455d.js";const X="/assets/giftcardIcon-45e92d74.svg",Z=e("h3",{class:"px-4 pb-2 text-2xl font-semibold text-primary"}," Redeem Giftcards ",-1),ee={class:"ion-padding grid grid-cols-1 gap-4 pt-0"},te=e("div",{class:""},[e("p",{class:"mt-1 text-sm text-dark-400"}," When you redeem a discount code, it is automatically applied to your next subscription ")],-1),se={class:"mt-4 grid grid-cols-1 gap-2 text-dark-500"},ae=e("h4",{class:"text-lg text-dark-500"},"Redemption History",-1),oe={key:0,class:"grid grid-cols-1 gap-4"},ne={class:"mb-4 text-sm text-dark-400"},re={class:"grid grid-cols-1 gap-4 text-sm"},le=e("div",{class:"w-12"},[e("img",{src:X,alt:"",class:"w-full object-cover"})],-1),de={class:"flex w-full justify-between gap-4"},ce={class:"grid grid-cols-1"},ie={class:"text-base"},ue={class:"text-xs uppercase text-dark-400"},me={class:"text-left text-[16px] font-medium text-secondary"},ve={__name:"RedeemGiftcards",setup(pe){const k=L("http"),w=T(),{showToast:I,processError:C,formatAmount:V,transformData:h}=H,d=m(!1),g=m(!1),i=m(""),y=m(!1),u=m([]),c=J(()=>w.getRedeemedCards);u.value=h(c.value);let N=["January","February","March","April","May","June","July","August","September","October","November","December"],B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];const E=async t=>{await x(),t.target.complete()};W(c,()=>{u.value=h(c.value),console.log(u.value)}),q(async()=>{d.value=!0,await x(),d.value=!1,u.value=h(c.value)});const M=async()=>{if(i.value.trim()!==""){g.value=!0,d.value=!0;try{const t=await k({endpoint:"RedeemGiftcards",httpMethod:"post",body:{code:i.value}});await x(),g.value=!1,d.value=!1,i.value="",I("success","Gift card redeem"),console.log(t)}catch(t){g.value=!1,d.value=!1;const s=C(t);console.log(s),y.value=s}}else y.value="Please enter code"},x=async()=>{try{const t=await k({endpoint:"GetRedeemedCards",httpMethod:"get"});console.log(t),w.$patch({redeemedCards:t.items})}catch(t){const s=C(t);console.log(s)}};return(t,s)=>{const D=p("PNav"),F=p("PInput"),G=p("PButton"),S=p("PEmpty"),j=p("PLoader");return o(),b(n(Q),null,{default:_(()=>[r(n(z),{class:"ion-no-border bg-white"},{default:_(()=>[r(D),Z]),_:1}),r(n($),{fullscreen:!0},{default:_(()=>[r(n(O),{slot:"fixed",onIonRefresh:s[0]||(s[0]=a=>E(a))},{default:_(()=>[r(n(U))]),_:1}),e("div",ee,[te,r(F,{error:y.value,modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=a=>i.value=a),label:"Enter Code"},null,8,["error","modelValue"]),r(G,{loading:g.value,block:"",onClick:M},{default:_(()=>[Y("Redeem")]),_:1},8,["loading"]),e("div",se,[ae,c.value&&c.value.length?(o(),v("div",oe,[(o(!0),v(P,null,R(u.value,(a,A)=>(o(),v("div",{key:A},[e("p",ne,l(n(B)[a.day])+", "+l(n(N)[a.month])+" "+l(a.date)+", "+l(a.year),1),e("div",re,[(o(!0),v(P,null,R(a.data,f=>(o(),v("div",{class:"flex items-center gap-3 border-b border-dark-50 pb-4 last:border-0",key:f.id},[le,e("div",de,[e("div",ce,[e("span",ie,l(f.giftCard.code),1),e("span",ue,l(f.time),1)]),e("div",me,l(n(V)(f.giftCard.amount)),1)])]))),128))])]))),128))])):(o(),b(S,{key:1,caption:"You donâ€™t have any redeem gift cards at the moment"}))])])]),_:1}),d.value?(o(),b(j,{key:0})):K("",!0)]),_:1})}}};export{ve as default};
