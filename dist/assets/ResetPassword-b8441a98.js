import{u as y,s as x,i as C,c as N,L as m,j as k,r,o as B,a as I,w as n,d as w,P as R,b as t,e as l,O as E,m as F,q as L,n as S,z as j}from"./index-ffa3455d.js";const M=l("div",{class:"px-4 grid grid-cols-1 gap-2"},[l("h3",{class:"text-2xl font-semibold text-primary"},"Create New Password")],-1),T=["onSubmit"],U={class:"ion-padding mb-4"},D={__name:"ResetPassword",setup(q){const f=y(),P=x("http"),g=C(),{showToast:c}=j,_=N(()=>f.getLoading),s=m({password:"",confirmPassword:"",email:""}),e=m({password:!1,confirmPassword:!1}),i=async()=>{const{value:a}=await R.get({key:"userEmail"});s.email=a,console.log(s.email)};i(),k(()=>{i()});function h(){return s.password.trim()==""?(e.password="Please enter a password",!1):s.password!==s.confirmPassword?(e.confirmPassword="Password doesn't match",!1):(e.password=!1,e.confirmPassword=!1,!0)}const p=async()=>{if(h()){console.log(s);try{const a=await P({endpoint:"ResetPassword",httpMethod:"post",body:s});console.log(a),g.push({name:"Login"}),c("success","Pin reset successful")}catch(a){const o=a.response.data.message;console.log(o),c("error",o)}}};return(a,o)=>{const b=r("PNav"),u=r("PInput"),v=r("PButton"),V=r("PFooter");return B(),I(w(S),null,{default:n(()=>[t(b),t(w(F),{fullscreen:""},{default:n(()=>[M,l("form",{onSubmit:E(p,["prevent"]),class:"grid grid-cols-1 gap-2 ion-padding"},[t(u,{modelValue:s.password,"onUpdate:modelValue":o[0]||(o[0]=d=>s.password=d),label:"Password",type:"password",inputmode:"password",error:e.password},null,8,["modelValue","error"]),t(u,{modelValue:s.confirmPassword,"onUpdate:modelValue":o[1]||(o[1]=d=>s.confirmPassword=d),label:"Confirm Password",type:"password",inputmode:"password",error:e.confirmPassword},null,8,["modelValue","error"])],40,T)]),_:1}),t(V,null,{default:n(()=>[l("div",U,[t(v,{block:"",onClick:p,class:"mt-4",loading:_.value,type:"submit"},{default:n(()=>[L("Change Password")]),_:1},8,["loading"])])]),_:1})]),_:1})}}};export{D as default};
