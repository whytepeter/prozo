import{u as b,s as C,i as x,v as y,c as B,L as m,r as d,o as k,a as I,w as l,d as P,b as a,e as u,m as U,q as F,n as R,z as S}from"./index-ffa3455d.js";const T=u("h3",{class:"px-4 text-2xl font-semibold text-primary"},"Change Password",-1),j={class:"ion-padding grid grid-cols-1 gap-2"},q={class:"ion-padding mb-4"},D={__name:"ChangePassword",setup(z){const p=b(),f=C("http"),g=x(),{showToast:c}=S,t=y(!1),i=B(()=>p.getUser),s=m({oldPassword:"",newPassword:"",confirmNewPassword:""}),o=m({oldPassword:!1,newPassword:!1,confirmNewPassword:!1});function _(){return s.oldPassword.trim()==""?(o.oldPassword="Please enter a old password",!1):s.newPassword.trim()==""?(o.newPassword="Please enter a new password",!1):s.newPassword!==s.confirmNewPassword?(o.confirmNewPassword="Password doesn't match",!1):(o.newPassword=!1,o.confirmNewPassword=!1,!0)}const N=async()=>{if(_()){console.log(s),s.email=i.value&&i.value.email;try{t.value=!0;const n=await f({endpoint:"ChangePassword",httpMethod:"post",body:s});console.log(n),s.oldPassword="",s.newPassword="",s.confirmNewPassword="",t.value=!1,g.push({name:"AccountSettings"}),c("success","Password updated successful")}catch(n){t.value=!1;const e=n.response.data.message;console.log(e),c("error",e)}}};return(n,e)=>{const h=d("PNav"),w=d("PInput"),v=d("PButton"),V=d("PFooter");return k(),I(P(R),null,{default:l(()=>[a(h,{title:""}),a(P(U),{fullscreen:""},{default:l(()=>[T,u("form",j,[a(w,{modelValue:s.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=r=>s.oldPassword=r),label:"Old Password",type:"password",inputmode:"password",error:o.oldPassword},null,8,["modelValue","error"]),a(w,{modelValue:s.newPassword,"onUpdate:modelValue":e[1]||(e[1]=r=>s.newPassword=r),label:"Password",type:"password",inputmode:"password",error:o.newPassword},null,8,["modelValue","error"]),a(w,{modelValue:s.confirmNewPassword,"onUpdate:modelValue":e[2]||(e[2]=r=>s.confirmNewPassword=r),label:"Confirm Password",type:"password",inputmode:"password",error:o.confirmNewPassword},null,8,["modelValue","error"])])]),_:1}),a(V,null,{default:l(()=>[u("div",q,[a(v,{block:"",class:"mt-4",loading:t.value,onClick:N},{default:l(()=>[F("Change Password")]),_:1},8,["loading"])])]),_:1})]),_:1})}}};export{D as default};
