import{_ as S}from"./fade-fff22378.js";import{u as j,s as P,v as k,c as b,r as C,o,h as l,B as c,e as t,t as n,x as d,d as z,b as f,w as h,q as w,F,z as O}from"./index-ffa3455d.js";const V="/assets/walletIcon-146ccffe.svg",q={key:0,class:"flex items-center justify-between gap-4 text-tertiary-light"},E=t("i",{class:"pi pi-trash"},null,-1),T=[E],Y={key:0},G={key:1},I={key:0,class:"pi pi-check-circle"},W={key:1,class:"pi pi-circle text-dark-200"},H=t("span",{class:"pointer-events-none absolute -bottom-4 right-0"},[t("img",{src:S,alt:""})],-1),K={class:"itemd-center flex gap-3"},L=t("img",{src:V,alt:""},null,-1),Q={class:"grid grid-cols-1 text-left text-xs leading-4"},R={class:"text-lg font-medium text-dark-500"},U=t("span",null,"Prozo Wallet",-1),X={key:0,class:"pi pi-check-circle"},Z={key:1,class:"pi pi-circle text-dark-200"},_={class:"grid grid-cols-2 gap-2"},ae={__name:"CreditCard",props:{outlined:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},method:{type:String,default:"card"},color:{type:String,default:"secondary"},card:{type:Object,default:()=>({})}},setup(e){const u=e,{showToast:g,formatAmount:$,processError:y}=O,A=j(),x=P("http"),r=k(!1),i=k(!1),m=b(()=>JSON.parse(u.card.paystackDetails)),B=b(()=>m.value&&m.value.authorization.account_name?m.value.authorization.account_name:""),N=a=>a?{1:"Jan","01":"Jan",2:"Feb","02":"Feb",3:"Mar","03":"Mar",4:"Apr","04":"Apr",5:"May","05":"May",6:"Jun","06":"Jun",7:"Jul","07":"Jul",8:"Aug","08":"Aug",9:"Sep","09":"Sep",10:"Oct",11:"Nov",12:"Dec"}[a]:"N/A",D=async()=>{console.log(u.card);try{i.value=!0;const a=await x({endpoint:"DeleteCard",httpMethod:"delete",additionalParams:{id:u.card.id}});i.value=!1,r.value=!1,console.log(a),g("success","Card successfully deleted"),await J()}catch(a){i.value=!1;const s=y(a);console.log(s),g("error",s)}},J=async()=>{try{const a=await x({endpoint:"GetCards",httpMethod:"get"});console.log(a),A.$patch({cards:a.items})}catch(a){const s=y(a);console.log(s)}};return(a,s)=>{const v=C("PButton"),M=C("PAlert");return o(),l(F,null,[e.method=="card"?(o(),l("div",{key:0,class:c([[e.outlined?`border bg-white py-5 text-dark-400 border-${e.color}`:"bg-primary p-6 text-tertiary-light"],"ion-padding relative grid w-full grid-cols-1 gap-2 rounded-xl text-left"])},[e.outlined?d("",!0):(o(),l("div",q,[t("span",null,n(e.card&&e.card.card_type),1),t("div",{onClick:s[0]||(s[0]=p=>r.value=!0),class:"flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-tertiary-light p-1 text-error"},T)])),t("div",{class:c([[e.outlined?"text-lg text-dark-500":"text-xl text-primary-light"],"font-semibold"])},n(e.card&&e.card.bin)+" ** **** "+n(e.card&&e.card.last4),3),t("div",{class:c([[e.outlined?"text-xs":"justify-between gap-2"],"flex items-center text-sm"])},[e.outlined?(o(),l("span",Y,n(),1)):(o(),l("span",G,n(B.value),1)),t("span",null,n(N(e.card&&e.card.exp_month))+"/"+n(e.card&&e.card.exp_year),1)],2),e.outlined?(o(),l("span",{key:1,class:c([`text-${e.color}`,"absolute right-4 top-1/2 -translate-y-1/2 transform text-xl"])},[e.color=="secondary"?(o(),l("i",I)):(o(),l("i",W))],2)):d("",!0),H],2)):d("",!0),e.method=="wallet"?(o(),l("div",{key:1,class:c([["border bg-white py-6 text-dark-400",`border-${e.color}`],"ion-padding relative flex w-full items-center justify-between rounded-xl"])},[t("div",K,[L,t("div",Q,[t("span",R,n(z($)(e.card.balance)),1),U])]),t("span",{class:c([`text-${e.color}`,"absolute right-4 top-1/2 -translate-y-1/2 transform text-xl"])},[e.color=="secondary"?(o(),l("i",X)):(o(),l("i",Z))],2)],2)):d("",!0),f(M,{type:"info",isOpen:r.value,onClose:s[2]||(s[2]=p=>r.value=!1),title:"Delete Card",caption:"You are about to delete this card"},{default:h(()=>[t("div",_,[f(v,{onClick:s[1]||(s[1]=p=>r.value=!1),block:""},{default:h(()=>[w(" Cancel")]),_:1}),f(v,{loading:i.value,fill:"outline",onClick:D,block:""},{default:h(()=>[w(" Yes")]),_:1},8,["loading"])])]),_:1},8,["isOpen"])],64)}}};export{ae as _};
