import{u as q,P as $,C as K,s as Q,i as W,v as R,c as b,j as Y,r as f,o as i,a as d,w as n,d as s,z as X,b as a,I as Z,e,t as c,q as v,h,x as w,g as ee,D as te,y as V,F as j,E as B,G as m,m as se,n as oe,H as ne,J as ae,K as le}from"./index-ffa3455d.js";import{c as ie}from"./chatIcon-fac8458f.js";const ce="/assets/verified-8fabc8ca.svg",re="/assets/copy-t-796fb1fc.svg",ue="/assets/logo-79603cdb.svg",de="/assets/profileIcon-05dd20e3.svg",pe="/assets/billIcon-a06f942d.svg",fe="/assets/cardIcon-b965cc29.svg",me="/assets/referralIcon-2017b12d.svg",ge="/assets/redeemIcon-54327235.svg",ve="/assets/securityIcon-daa1ba94.svg",he="/assets/pinIcon-f127cbae.svg",_e="/assets/notificationIcon-128a5403.svg",ye="/assets/faqIcon-de1f3636.svg",xe="/assets/legalIcon-0d1283dc.svg",be="/assets/rateIcon-e188a06c.svg",we="/assets/logoutIcon-cb5af339.svg",Ie=async()=>{const _=q();await $.remove({key:"token"}),await $.remove({key:"firstTimer"}),K.push({name:"Login"}),_.$patch({isLoggedIn:!1}),_.$reset()},ke={class:"flex items-center justify-between"},Pe={class:"flex items-center gap-2"},Ce={class:"flex h-16 w-16 flex-shrink-0 items-center items-center justify-center rounded-full border-2 border-tertiary-light bg-primary p-2 font-semibold text-tertiary"},Ne={class:"w-52 truncate text-lg font-medium text-dark-500"},Le={class:"flex items-center gap-1 text-primary"},Se={key:0,src:ce,alt:"",class:"w-5"},$e={class:"flex items-center gap-2"},Re={class:"mt-1 w-fit rounded-full border-[1.5px] border-tertiary-light px-2 py-[1.5px] text-sm text-dark-400"},Ve=e("img",{src:re,alt:""},null,-1),je=[Ve],Be=["onClick"],qe={class:"flex items-center gap-2"},ze={class:"bg-background flex h-9 w-9 items-center justify-center rounded-full"},Ae=["src"],Fe={class:"flex flex-col font-light text-dark-600"},Ge={class:"text-xs text-dark-400"},Te={key:0,class:"pointer-events-none"},De={class:"ion-activatable relative flex items-center justify-between overflow-hidden px-4 py-3"},He={class:"flex items-center gap-2"},Me={class:"bg-background flex h-9 w-9 items-center justify-center rounded-full"},Ue=["src"],Ee=e("span",{class:"text-error"}," Logout ",-1),Oe=e("div",{class:"flex items-center gap-3"},[e("div",{class:"h-10 w-10"},[e("img",{src:ue,alt:"",class:"w-full"})]),e("div",{class:"flex flex-col leading-3"},[e("strong",{class:"text-sm"},"Prozo"),e("span",null,"Version 1.0")])],-1),Je={class:"grid grid-cols-1 gap-3"},We={__name:"AccountSettings",setup(_){const{initials:z,copyText:A,showToast:F,processError:I}=X,y=q(),k=Q("http"),P=W(),p=R(!1),g=R(!1),l=b(()=>y.getUser),x=b(()=>{const t=y.getSettings;return t&&t.push_notification}),G=b(()=>[{title:"Account Settings",links:[{name:"Profile Information",description:"Change your account information",icon:de,routeName:"ProfileInformation",path:null,show:!0},{name:"Bills and Payments",description:"Manange auto bills and payments",icon:pe,routeName:"BillsAndPayment",path:null,show:!0},{name:"Card Settings",description:"Add your credit & debit cards",icon:fe,routeName:"Cards",path:null,show:!0},{name:"Referrals",description:"Invite your friends, and get a bonus",icon:me,routeName:"Referrals",path:null,show:!0},{name:"Redeem Giftcards",description:"Redeem your giftcards and discount code",icon:ge,routeName:"RedeemGiftcards",path:null,show:!0}]},{title:"Security",links:[{name:"Change Password",icon:ve,routeName:"ChangePassword",path:null,show:!0},{name:`${l.value&&l.value.isPinSet?"Change Pin":"Create Pin"}`,icon:he,routeName:"ChangePin",path:null,show:!0},{name:"Push Notification",icon:_e,routeName:null,path:null,toggle:!0,show:!0}]},{title:"More",links:[{name:"FAQs",description:"Frequently asked questions",icon:ye,routeName:"Faq",path:null,show:!0},{name:"Get Help",description:"Have an issue? Speak to our team",icon:ie,routeName:"GetHelp",path:null,show:!0},{name:"Legal",description:"Our terms and privacy policy",icon:xe,routeName:"Legal",path:null,show:!0},{name:"Rate Us",description:"Rate us on playstore, appstore",icon:be,routeName:null,path:null,show:!0}]}]);Y(()=>{C()});const T=async()=>{try{g.value=!0,await k({endpoint:"UpdateSettings",httpMethod:"patch",body:{push_notification:!x.value}}),await C(),g.value=!1}catch(t){g.value=!1;const o=I(t);console.log(o),F(o)}},D=t=>{t.routeName?P.push({name:t.routeName}):t.path?P.push(t.path):t.name=="Push Notification"?T():t.toggle||(selected.value===t.name?selected.value=null:selected.value=t.name)},H=()=>{p.value=!1,Ie()},C=async()=>{try{const t=await k({endpoint:"GetUserSettings",httpMethod:"get"});console.log(t),y.$patch({settings:t})}catch(t){const o=I(t);console.log(o)}};return(t,o)=>{const M=f("PDivider"),N=f("ion-ripple-effect"),L=f("PButton"),U=f("PAlert"),E=f("PLoader");return i(),d(s(oe),null,{default:n(()=>[a(s(ee),{class:"ion-no-border bg-white pt-4"},{default:n(()=>[a(s(Z),{color:"white",class:"mt-2 p-4"},{default:n(()=>[e("div",ke,[e("div",Pe,[e("div",Ce,c(s(z)(l.value&&l.value)),1),e("div",Ne,[e("div",Le,[v(c(l.value&&l.value.first_name)+" "+c(l.value&&l.value.last_name)+" ",1),l.value&&l.value.verified?(i(),h("img",Se)):w("",!0)]),e("div",$e,[e("span",Re,c(l.value&&l.value.ref_code),1),e("span",{class:"",onClick:o[0]||(o[0]=r=>s(A)(l.value&&l.value.ref_code))},je)])])])])]),_:1})]),_:1}),a(s(se),{fullscreen:!0,color:"tertiary"},{default:n(()=>[a(s(te),{class:"-mt-2 bg-white p-0 text-dark-600"},{default:n(()=>[(i(!0),h(j,null,V(G.value,(r,O)=>(i(),d(s(B),{key:O,class:"mt-4 first:mt-0"},{default:n(()=>[a(s(m),{size:"12",class:"mb-4 p-0"},{default:n(()=>[a(M)]),_:1}),a(s(m),{size:"12",class:"mb-1 p-0 px-4"},{default:n(()=>[v(c(r.title),1)]),_:2},1024),(i(!0),h(j,null,V(r.links,(u,J)=>(i(),d(s(m),{size:"12",class:"p-0",key:`link-${J}`},{default:n(()=>[e("div",{onClick:S=>D(u),class:"ion-activatable relative flex items-center justify-between overflow-hidden px-4 py-3"},[e("div",qe,[e("div",ze,[e("img",{src:u.icon},null,8,Ae)]),e("div",Fe,[e("span",null,c(u.name),1),e("span",Ge,c(u.description),1)])]),u.toggle?(i(),h("div",Te,[u.name==="Push Notification"?(i(),d(s(ne),{key:0,mode:"ios",modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=S=>x.value=S),slot:"end",color:"secondary"},null,8,["modelValue"])):w("",!0)])):(i(),d(s(ae),{key:1,class:"text-xl",icon:s(le),color:"medium"},null,8,["icon"])),a(N,{type:"unbounded",class:"text-dark-100"})],8,Be)]),_:2},1024))),128))]),_:2},1024))),128)),a(s(B),{class:"p-0"},{default:n(()=>[a(s(m),{onClick:o[2]||(o[2]=r=>p.value=!0),size:"12",class:"p-0"},{default:n(()=>[e("div",De,[e("div",He,[e("div",Me,[e("img",{src:s(we)},null,8,Ue)]),Ee]),a(N,{type:"unbounded",class:"text-red-100"})])]),_:1}),a(s(m),{size:"12",class:"ion-padding mt-4 bg-tertiary text-xs text-primary"},{default:n(()=>[Oe]),_:1})]),_:1})]),_:1}),a(U,{type:"sad",isOpen:p.value,onClose:o[4]||(o[4]=r=>p.value=!1),title:"Logout",caption:"Oh snap you're leaving"},{default:n(()=>[e("div",Je,[a(L,{onClick:o[3]||(o[3]=r=>p.value=!1),block:""},{default:n(()=>[v(" Cancel")]),_:1}),a(L,{fill:"outline",onClick:H,block:""},{default:n(()=>[v(" Yes, Log me out")]),_:1})])]),_:1},8,["isOpen"])]),_:1}),g.value?(i(),d(E,{key:0})):w("",!0)]),_:1})}}};export{We as default};
