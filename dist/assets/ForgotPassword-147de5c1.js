import{u as x,s as b,i as w,c as k,v as V,L as O,r as l,o as B,a as C,w as r,d as c,b as s,e as a,m as F,q as N,n as E,P as I,z as T}from"./index-ffa3455d.js";const S=a("div",{class:"grid grid-cols-1 gap-2 px-4"},[a("h3",{class:"text-2xl font-semibold text-primary"},"Forgot Pin"),a("p",{class:"text-sm text-dark-400"}," Kindly enter the email or phone number associated with your account. We'll use this information to send you an OTP. ")],-1),L={class:"ion-padding grid grid-cols-1 gap-4"},M={class:"ion-padding mb-4"},q={__name:"ForgotPassword",setup(R){const u=x(),i=b("http"),d=w(),{showToast:m}=T,p=k(()=>u.getLoading),t=V(""),n=O({email:!1}),_=async()=>{if(t.value.trim()!==""){n.email=!1;try{const e=await i({endpoint:"CheckEmail",httpMethod:"post",body:{email:t.value,type:"user"}});console.log(e),e.exist?await g():n.email="user doesn't exist"}catch(e){console.log(e.message)}}else return n.email="Please fill in your email",!1},g=async()=>{try{const e=await i({endpoint:"SendOtp",httpMethod:"post",body:{userEmailOrPhone:t.value}});console.log(e),await I.set({key:"userEmail",value:t.value}),d.push({name:"VerifyOtp"})}catch(e){const o=e.response.data.message;console.log(o),m("error",o)}};return(e,o)=>{const f=l("PNav"),h=l("PInput"),P=l("PButton"),y=l("PFooter");return B(),C(c(E),null,{default:r(()=>[s(f),s(c(F),{fullscreen:""},{default:r(()=>[S,a("form",L,[s(h,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=v=>t.value=v),label:"Email Address",type:"email",inputmode:"email",error:n.email},null,8,["modelValue","error"])])]),_:1}),s(y,null,{default:r(()=>[a("div",M,[s(P,{onClick:_,block:"",loading:p.value,type:"submit"},{default:r(()=>[N("Send OTP")]),_:1},8,["loading"])])]),_:1})]),_:1})}}};export{q as default};
